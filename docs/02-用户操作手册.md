# EAIP Viewer 用户操作手册

## 目录
- [快速上手](#快速上手)
- [用户认证](#用户认证)
- [机场列表浏览](#机场列表浏览)
- [航图查看](#航图查看)
- [搜索功能](#搜索功能)
- [标注工具](#标注工具)
- [数据更新](#数据更新)
- [设置与配置](#设置与配置)
- [快捷键参考](#快捷键参考)
- [常见问题](#常见问题)

---

## 快速上手

### 首次启动

1. **启动应用程序**
   - Windows: 双击 `EAIP_Viewer.exe`
   - macOS: 打开 `EAIP_Viewer.app`
   - Linux: 运行 `./EAIP_Viewer`

2. **选择访问模式**
   - **游客模式**: 无需注册，可浏览部分公开航图
   - **注册账户**: 获得完整功能访问权限

3. **等待数据同步**（首次启动）
   - 应用会自动检查并下载最新航图数据
   - 显示下载进度条
   - 根据网络速度，可能需要 5-30 分钟

---

## 用户认证

### 注册新账户

#### 步骤 1: 打开注册页面
- 点击登录界面的 "注册账户" 按钮

#### 步骤 2: 填写注册信息
- **用户名**: 3-20 个字符，支持字母、数字、下划线
- **邮箱**: 用于找回密码和接收更新通知
- **密码**: 至少 8 个字符，建议包含大小写字母、数字和特殊符号
- **确认密码**: 再次输入密码以确保准确

#### 步骤 3: 阅读并同意用户协议
- 勾选 "我已阅读并同意用户协议"
- 点击协议链接可查看详细条款

#### 步骤 4: 完成注册
- 点击 "注册" 按钮
- 系统会自动登录新账户

### 登录账户

#### 普通登录
1. 输入用户名和密码
2. 勾选 "记住我" 可保持登录状态
3. 点击 "登录" 按钮

#### 自动登录
- 如果勾选了 "记住我"，下次启动会自动登录
- 30 天后需要重新登录（安全策略）

### 游客模式

#### 访问限制
- ✅ 可浏览公开航图
- ❌ 无法使用标注功能
- ❌ 无法收藏机场
- ❌ 无法查看 ATIS，METAR 和 TAF 信息

#### 升级到完整账户
- 点击顶部的 "升级账户" 按钮
- 填写注册信息即可

### 密码管理

#### 修改密码
1. 进入 "设置" → "账户安全"
2. 输入当前密码
3. 输入新密码（两次）
4. 点击 "保存"

#### 忘记密码
1. 登录界面点击 "忘记密码"
2. 输入注册邮箱
3. 查收邮件获取重置链接
4. 设置新密码

---

## 机场列表浏览

### 主列表视图

#### 列表内容
每个机场卡片显示：
- **机场中文名称**: 例如 "北京首都国际机场"
- **机场英文名称**: 例如 "Beijing Capital International Airport"
- **ICAO 代码**: 例如 "ZBAA"
- **航图数量**: 例如 "36 charts"（该机场可用航图总数）
- **机场图标**: 根据机场等级显示不同图标

#### 排序方式
- **按字母排序**:
  - 点击 "A-Z" 按钮
  - ICAO 代码字母顺序排列
- **按地区排序**:
  - 点击 "地区" 按钮
  - 按中国民航分区（华北、华东、中南、西南、西北、东北、新疆）
- **按收藏排序**:
  - 收藏的机场优先显示

#### 筛选功能
- **国内机场**: 仅显示中国境内机场
- **国际机场**: 仅显示国际机场
- **已收藏**: 仅显示收藏的机场
- **最近访问**: 按访问时间排序

### 机场详情

#### 进入机场详情
- 点击任意机场卡片
- 显示该机场的航图分类网格

#### 航图类型概览
显示该机场可用的航图类型，包括：
- ADC (机场图)
- APDC (机位/停机图)
- GMC (地面活动图)
- SID (标准仪表离场)
- STAR (标准进场程序)
- IAC (仪表进近图)
- ... 等 14 种类型

#### 数量统计
- 每种类型显示可用航图数量
- 灰色图标表示该类型暂无数据

### 收藏功能

#### 添加收藏
- 点击机场卡片右上角的 ⭐ 图标
- 图标变为实心 ★ 表示已收藏

#### 取消收藏
- 再次点击 ★ 图标
- 图标变回空心 ⭐

#### 收藏列表
- 进入 "我的收藏" 页面
- 查看所有收藏的机场
- 支持拖拽排序

---

## 航图查看

### 打开航图

#### 方式一：从机场详情进入
1. 选择机场
2. 点击航图类型（如 "SID"）
3. 选择具体航图文件

#### 方式二：从搜索结果进入
1. 搜索航图关键词
2. 点击搜索结果中的航图
3. 直接打开航图查看器

### 航图查看器界面

#### 主要区域
```
┌─────────────────────────────────────┐
│  顶部工具栏                          │
├─────────────────────────────────────┤
│                                     │
│                                     │
│         航图显示区域                 │
│       （支持缩放、平移）              │
│                                     │
│                                     │
├─────────────────────────────────────┤
│  底部状态栏                          │
└─────────────────────────────────────┘
```

#### 顶部工具栏
- 📁 返回列表
- ➕ 放大
- ➖ 缩小
- 🔄 旋转
- 📐 适应窗口
- ✏️ 标注工具
- ℹ️ 航图信息

#### 底部状态栏
- 当前缩放比例（如 "125%"）
- 航图生效日期（如 "AIRAC 2410, effective 2024-10-10"）
- 用户名水印提示

### 基本操作

#### 缩放
**方法一：鼠标滚轮**
- 向前滚动：放大
- 向后滚动：缩小
- 缩放范围：25% - 500%

**方法二：工具栏按钮**
- 点击 ➕ 按钮：每次放大 25%
- 点击 ➖ 按钮：每次缩小 25%

**方法三：快捷键**
- `Ctrl + +` 或 `Ctrl + =`: 放大
- `Ctrl + -`: 缩小
- `Ctrl + 0`: 恢复 100%

**方法四：触控板**
- 双指捏合：缩放
- 双指滑动：平移

#### 平移
**方法一：鼠标拖拽**
- 按住鼠标左键拖动画布

**方法二：空格键拖拽**
- 按住空格键 + 鼠标左键拖动（类似 Photoshop）

**方法三：方向键**
- ↑ ↓ ← →: 微调位置（每次移动 20px）
- Shift + 方向键: 快速移动（每次移动 100px）

#### 旋转
- 点击 🔄 按钮：每次顺时针旋转 90°
- 快捷键 `R`: 旋转
- 快捷键 `Shift + R`: 逆时针旋转

#### 适应窗口
- 点击 📐 按钮：自动缩放以适应窗口大小
- 快捷键 `F`: 适应窗口
- 双击画布：快速适应窗口

### 航图信息查看

#### 元数据信息
点击 ℹ️ 按钮查看：
- **机场名称**: ZBAA - 北京首都国际机场
- **航图类型**: SID - Standard Instrument Departure
- **航图名称**: ZBAA SID RWY01
- **生效日期**: 2024-10-10
- **失效日期**: 2024-11-07
- **AIRAC Cycle**: 2410
- **文件大小**: 2.3 MB
- **分辨率**: 3508 x 2480 pixels

#### 版本历史
- 查看该航图的历史版本
- 对比不同版本的差异（v1.1 功能）

---

## 搜索功能

### 全局搜索

#### 搜索入口
- 顶部导航栏的搜索框
- 快捷键 `Ctrl + F` 或 `Cmd + F`

#### 搜索语法

##### 1. ICAO 代码搜索
```
输入: ZBAA
结果: 北京首都国际机场及其所有航图
```

##### 2. 机场名称搜索
```
输入: 北京
结果: 北京首都、北京大兴、北京南苑等
```

```
输入: Beijing
结果: 所有包含 "Beijing" 的机场
```

##### 3. 航图类型搜索
```
输入: ZBAA SID
结果: 北京首都机场的所有 SID 图
```

##### 4. 航图文件名搜索
```
输入: RWY01
结果: 所有 01 跑道相关的航图
```

##### 5. 组合搜索
```
输入: ZBAA SID RWY01
结果: 北京首都机场 01 跑道的 SID 图
```

##### 6. 模糊搜索
```
输入: BJ
结果: 北京、Beijing、Bijie（毕节）等
```

### 高级搜索

#### 打开高级搜索
- 点击搜索框右侧的 "高级" 按钮
- 或快捷键 `Ctrl + Shift + F`

#### 高级筛选条件

##### 地区筛选
- ☐ 华北地区
- ☐ 华东地区
- ☐ 中南地区
- ☐ 西南地区
- ☐ 西北地区
- ☐ 东北地区
- ☐ 新疆地区

##### 航图类型筛选
- ☐ ADC (机场图)
- ☐ APDC (机位/停机图)
- ☐ GMC (地面活动图)
- ☐ SID (标准仪表离场)
- ☐ STAR (标准进场程序)
- ☐ IAC (仪表进近图)
- ... （全部 14 种类型）

##### 日期筛选
- 生效日期范围: 2024-01-01 至 2024-12-31
- 仅显示当前有效航图

### 搜索结果

#### 结果显示
- 按相关度排序（默认）
- 按机场名称排序
- 按生效日期排序

#### 结果卡片
```
┌─────────────────────────────────┐
│ ZBAA SID RWY01                 │
│ 北京首都国际机场 - 01跑道离场   │
│ 生效: 2024-10-10               │
│ 大小: 2.3 MB                   │
└─────────────────────────────────┘
```

#### 快速操作
- 单击卡片: 打开航图查看器
- 右键菜单:
  - 查看航图信息
  - 收藏此航图
  - 复制文件名
  - 查看机场详情

### 搜索历史

#### 查看历史
- 点击搜索框时自动显示最近 10 条搜索记录

#### 清除历史
- 点击 "清除搜索历史" 按钮
- 或在设置中关闭 "保存搜索历史"

---

## 标注工具

> **注意**: 标注功能仅对注册用户开放

### 启用标注工具

#### 打开标注模式
- 点击顶部工具栏的 ✏️ 按钮
- 或快捷键 `A` (Annotation)

#### 标注工具栏
```
┌───────────────────────────────────┐
│ ✏️ 画笔  📏 测距  📝 文本  ⬛ 矩形 │
│ ⭕ 圆形  ↔️ 箭头  🎨 颜色  🗑️ 清除 │
└───────────────────────────────────┘
```

### 标注工具详解

#### 1. 画笔工具 ✏️
**用途**: 自由绘制标记、圈选区域

**使用方法**:
1. 选择画笔工具
2. 按住鼠标左键拖动绘制
3. 释放鼠标完成

**设置选项**:
- 线条粗细: 1 - 10 px
- 颜色选择: 红、黄、绿、蓝、白、黑
- 不透明度: 30% - 100%

**快捷键**: `P` (Pen)

#### 2. 测距工具 📏
**用途**: 测量航图上的距离

**使用方法**:
1. 选择测距工具
2. 点击起点
3. 点击终点
4. 显示距离（单位: NM、KM、英尺）

**设置选项**:
- 单位切换: NM / KM / Feet
- 显示比例尺
- 显示实际距离（根据航图比例自动计算）

**快捷键**: `M` (Measure)

**示例**:
```
起点: RWY01 入口
终点: VOR DME
距离: 5.2 NM (9.6 KM)
```

#### 3. 文本工具 📝
**用途**: 添加文字注释、标记关键点

**使用方法**:
1. 选择文本工具
2. 点击要添加文本的位置
3. 输入文本内容
4. 按 Enter 确认，Esc 取消

**设置选项**:
- 字体大小: 12 - 48 pt
- 字体颜色
- 背景色（可选）
- 字体: Arial、宋体、黑体

**快捷键**: `T` (Text)

#### 4. 矩形工具 ⬛
**用途**: 高亮区域、框选重点

**使用方法**:
1. 选择矩形工具
2. 点击左上角起点
3. 拖动至右下角
4. 释放鼠标完成

**设置选项**:
- 边框粗细
- 边框颜色
- 填充颜色（可选）
- 填充不透明度

**快捷键**: `R` (Rectangle)

#### 5. 圆形工具 ⭕
**用途**: 圈选关键区域、标记点位

**使用方法**:
1. 选择圆形工具
2. 点击圆心位置
3. 拖动确定半径
4. 释放鼠标完成

**快捷键**: `C` (Circle)

#### 6. 箭头工具 ↔️
**用途**: 指示方向、标注航路

**使用方法**:
1. 选择箭头工具
2. 点击箭头起点
3. 拖动至箭头终点
4. 释放鼠标完成

**设置选项**:
- 箭头样式: 单向、双向
- 箭头大小
- 线条粗细

**快捷键**: `W` (Arrow)

### 标注管理

#### 保存标注
- 标注会自动保存到本地数据库
- **重要**: 标注不会修改原始航图文件
- 标注数据加密存储

#### 清除标注
**清除当前航图的所有标注**:
- 点击 🗑️ "清除" 按钮
- 确认弹窗选择 "确定"

**清除单个标注**:
- 右键点击标注对象
- 选择 "删除"
- 或选中后按 Delete 键

#### 导出标注
**导出为图片**（带水印）:
1. 点击 "导出" 按钮
2. 选择 "导出为图片（PNG）"
3. 图片会包含用户水印

**导出标注数据**:
- 格式: JSON
- 仅包含标注坐标和样式
- 可导入到其他设备

### 标注协作（v1.2 计划功能）
- 团队共享标注
- 标注权限管理
- 标注版本历史

---

## 数据更新

### 自动更新

#### AIRAC Cycle 说明
- **AIRAC**: Aeronautical Information Regulation And Control
- **更新周期**: 每 28 天一个 Cycle
- **全球统一**: 所有国家的 AIRAC 日期一致

#### 自动检查更新
- **启动时检查**: 每次启动应用时自动检查
- **后台检查**: 每 6 小时自动检查一次
- **更新通知**: 有新版本时弹窗提示

#### 更新提示信息
```
┌─────────────────────────────────────┐
│  发现新的航图数据！                  │
│  当前 Cycle: 2410                   │
│  最新 Cycle: 2411                   │
│  生效日期: 2024-11-07               │
│  数据大小: 856 MB                   │
│                                     │
│  [  立即更新  ]  [  稍后提醒  ]     │
└─────────────────────────────────────┘
```

### 手动更新

#### 检查更新
1. 进入 "设置" → "数据更新"
2. 点击 "检查更新" 按钮
3. 查看当前和最新 Cycle 信息

#### 下载更新
1. 点击 "下载更新" 按钮
2. 显示下载进度条
3. 下载完成后自动安装

#### 下载进度
```
正在下载: AIRAC 2411 数据包
进度: ████████░░░░ 65% (556/856 MB)
速度: 5.2 MB/s
剩余时间: 约 1 分钟
```

### 更新选项

#### 更新模式
- **完整更新**: 下载所有航图数据（约 800-1200 MB）
- **增量更新**: 仅下载修改过的文件（约 100-300 MB）

#### 更新策略
- **自动安装**: 下载完成后自动替换旧数据
- **手动确认**: 下载后需手动点击 "安装更新"
- **定时更新**: 设置每天凌晨 2:00 自动更新

#### 更新设置
- **仅 WiFi 更新**: 移动网络不自动下载（省流量）
- **后台下载**: 使用应用时在后台下载
- **下载限速**: 限制下载速度避免占用带宽

### 版本管理

#### 查看版本历史
1. 进入 "设置" → "关于"
2. 点击 "版本历史"
3. 查看所有已安装的 Cycle

#### 回滚版本（v1.1 功能）
- 如果新版本有问题，可回滚到上一个 Cycle
- 最多保留最近 3 个版本

#### 更新日志
查看每个 Cycle 的变更内容：
- 新增机场
- 修改的航图
- 删除的过期数据
- 重要变更说明

---

## 设置与配置

### 通用设置

#### 语言
- 简体中文
- 繁体中文
- English
- 日本語

#### 主题
- **浅色主题**: 适合白天使用
- **深色主题**: 适合夜间使用
- **自动切换**: 跟随系统设置

#### 启动选项
- ☐ 开机自动启动
- ☐ 启动时检查更新
- ☐ 记住上次浏览的机场
- ☐ 最小化到系统托盘

### 显示设置

#### 界面缩放
- 100% (默认)
- 125% (推荐高分屏)
- 150%
- 自动（根据系统 DPI）

#### 航图显示
- **默认缩放**: 适应窗口 / 100% / 150%
- **平滑缩放**: 启用抗锯齿（消耗更多 GPU）
- **缓存大小**: 100 MB - 1 GB（影响性能和内存占用）

#### 水印设置
- **显示用户名**: 是 / 否
- **显示时间戳**: 是 / 否
- **水印透明度**: 10% - 50%
- **水印位置**: 左上 / 右上 / 左下 / 右下 / 中心

### 账户与安全

#### 账户信息
- 用户名: (不可修改)
- 邮箱: (可修改，需验证)
- 注册日期
- 账户类型: 标准用户 / admin（未来功能）

#### 安全设置
- **修改密码**
- **两步验证**（v1.1 功能）
- **登录设备管理**（v1.1 功能）
- **账户注销**

#### 隐私设置
- ☐ 允许收集匿名使用数据（帮助改进产品）
- ☐ 保存搜索历史
- ☐ 保存浏览历史
- ☐ 允许错误报告上传

### 数据管理

#### 缓存管理
- 当前缓存大小: 235 MB
- [  清除缓存  ] 按钮

#### 数据存储位置
- Windows: `C:\Users\<用户名>\AppData\Local\EAIP_Viewer`
- macOS: `~/Library/Application Support/EAIP_Viewer`
- Linux: `~/.local/share/EAIP_Viewer`

#### 导出数据
- 导出收藏列表
- 导出搜索历史
- 导出标注数据

#### 数据备份（v1.2 功能）
- 手动备份
- 自动备份（每周）
- 云端同步

### 高级设置

#### 性能优化
- **硬件加速**: 启用 / 禁用（OpenGL）
- **多线程渲染**: 启用 / 禁用
- **预加载航图**: 启用（更流畅但占用内存）

#### 网络设置
- **代理设置**:
  - 无代理
  - 系统代理
  - 手动配置代理
- **连接超时**: 30 秒（默认）
- **重试次数**: 3 次

#### 调试选项（开发者/admin）
- ☐ 启用调试日志
- ☐ 显示性能监视器
- ☐ 显示 QML 调试器

---

## 快捷键参考

### 全局快捷键

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `Ctrl + F` | 打开搜索 | 全局搜索机场和航图 |
| `Ctrl + Shift + F` | 高级搜索 | 打开高级搜索面板 |
| `Ctrl + ,` | 设置 | 打开设置页面 |
| `Ctrl + Q` | 退出应用 | 关闭 EAIP Viewer |
| `F11` | 全屏模式 | 切换全屏显示 |
| `Esc` | 返回/取消 | 返回上一页或取消操作 |

### 航图查看快捷键

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `Ctrl + +` | 放大 | 放大航图 |
| `Ctrl + -` | 缩小 | 缩小航图 |
| `Ctrl + 0` | 重置缩放 | 恢复 100% 显示 |
| `F` | 适应窗口 | 自动调整到窗口大小 |
| `R` | 旋转 | 顺时针旋转 90° |
| `Shift + R` | 逆时针旋转 | 逆时针旋转 90° |
| `Space + 拖动` | 平移 | 拖动航图位置 |
| `↑ ↓ ← →` | 微调位置 | 方向键移动航图 |

### 标注工具快捷键

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `A` | 启用标注 | 打开标注工具栏 |
| `P` | 画笔工具 | 自由绘制 |
| `M` | 测距工具 | 测量距离 |
| `T` | 文本工具 | 添加文字 |
| `R` | 矩形工具 | 绘制矩形 |
| `C` | 圆形工具 | 绘制圆形 |
| `W` | 箭头工具 | 绘制箭头 |
| `Delete` | 删除标注 | 删除选中的标注 |
| `Ctrl + Z` | 撤销 | 撤销上一步操作 |
| `Ctrl + Y` | 重做 | 重做上一步操作 |

### 列表浏览快捷键

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `Ctrl + L` | 跳转列表 | 返回机场列表 |
| `Ctrl + D` | 收藏/取消收藏 | 快速收藏当前机场 |
| `Page Up` | 上一页 | 列表向上翻页 |
| `Page Down` | 下一页 | 列表向下翻页 |
| `Home` | 回到顶部 | 跳转到列表顶部 |
| `End` | 回到底部 | 跳转到列表底部 |

---

## 常见问题

### 账户相关

**Q: 忘记密码怎么办？**
A: 点击登录页面的 "忘记密码"，输入注册邮箱，系统会发送重置链接到邮箱。

**Q: 可以修改用户名吗？**
A: 目前不支持修改用户名。如需更换，请注册新账户。

**Q: 游客模式和注册用户有什么区别？**
A: 游客模式仅能浏览公开航图，无法使用标注、收藏等高级功能。注册用户享有完整功能。

### 数据更新

**Q: AIRAC Cycle 是什么？**
A: 国际民航组织规定的航空情报资料更新周期，每 28 天更新一次，全球统一。

**Q: 更新失败怎么办？**
A: 检查网络连接，或稍后重试。如持续失败，请联系技术支持。

**Q: 可以选择不更新吗？**
A: 可以，但强烈建议及时更新以获取最新航图。过期航图会显示警告标识。

### 航图查看

**Q: 为什么航图上有水印？**
A: 水印用于版权保护和追溯，包含用户名和时间戳，无法去除。

**Q: 可以导出或打印航图吗？**
A: 出于版权保护，应用不支持导出和打印功能。

**Q: 航图显示模糊怎么办？**
A: 尝试放大查看，或在设置中启用 "平滑缩放"。确保显卡支持硬件加速。

### 标注功能

**Q: 标注会修改原始文件吗？**
A: 不会。标注数据单独保存在数据库中，不会修改原始航图文件。

**Q: 标注可以导出吗？**
A: 可以导出为 JSON 格式，或导出带标注的图片（含水印）。

**Q: 标注可以与他人共享吗？**
A: v1.2 版本将支持团队共享标注功能。

### 性能问题

**Q: 应用启动很慢怎么办？**
A:
1. 检查是否在后台下载更新
2. 清除缓存
3. 减小缓存大小设置
4. 关闭不必要的后台程序

**Q: 航图加载卡顿？**
A:
1. 启用硬件加速
2. 增加缓存大小
3. 关闭其他占用 GPU 的程序
4. 更新显卡驱动

### 技术支持

**Q: 如何报告 Bug？**
A: 访问 [GitHub Issues](https://github.com/cg8-5712/EAIP_Viewer/issues) 提交问题，附上错误日志和系统信息。

**Q: 如何获取日志文件？**
A:
- Windows: `C:\Users\<用户名>\AppData\Local\EAIP_Viewer\logs`
- macOS: `~/Library/Logs/EAIP_Viewer`
- Linux: `~/.local/share/EAIP_Viewer/logs`

**Q: 支持哪些操作系统版本？**
A:
- Windows 10 (1809+) / 11
- macOS 10.15+
- Ubuntu 20.04+, Fedora 35+

---

## 获取更多帮助

- **官方文档**: https://eaip-viewer.readthedocs.io
- **GitHub 仓库**: https://github.com/cg8-5712/EAIP_Viewer
- **问题反馈**: https://github.com/cg8-5712/EAIP_Viewer/issues
- **电子邮件**: [5712.cg8@gmail.com](mailto:5712.cg8@gmail.com)

---

**祝您使用愉快！**